<ion-header>
  <ion-toolbar>
    <ion-title>Residentes</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  <!-- üîç Buscador -->
  <ion-searchbar
    placeholder="Buscar por n√∫mero o nombre..."
    [(ngModel)]="searchTerm"
    (ionInput)="filtrarDepartamentos()"
    class="custom-search">
  </ion-searchbar>

  <!-- üìä Resumen general -->
  <ion-grid>
    <ion-row>
      <ion-col size="4">
        <ion-card>
          <ion-card-content class="ion-text-center">
            <ion-icon name="home-outline" color="primary" size="large"></ion-icon>
            <h2>{{ totalOcupados }}</h2>
            <p>Ocupados</p>
          </ion-card-content>
        </ion-card>
      </ion-col>

      <ion-col size="4">
        <ion-card>
          <ion-card-content class="ion-text-center">
            <ion-icon name="ellipse-outline" color="success" size="large"></ion-icon>
            <h2>{{ totalVacios }}</h2>
            <p>Vac√≠os</p>
          </ion-card-content>
        </ion-card>
      </ion-col>

      <ion-col size="4">
        <ion-card>
          <ion-card-content class="ion-text-center">
            <ion-icon name="alert-circle-outline" color="danger" size="large"></ion-icon>
            <h2>{{ totalMorosos }}</h2>
            <p>Morosos</p>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>

  <!-- üèòÔ∏è Lista de Residentes -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>Listado de Residentes</ion-card-title>
    </ion-card-header>

    <ion-card-content>
      <ion-list>
        <ion-item *ngFor="let d of departamentosFiltrados" class="resident-item">
          <ion-icon name="person-circle-outline" slot="start" color="medium"></ion-icon>
          <ion-label>
            <h2><strong>Dpto {{ d.numero }}</strong> ‚Äî {{ d.nombre }}</h2>
            <p>üìû {{ d.telefono }}</p>
            <p>‚úâÔ∏è {{ d.correo }}</p>
          </ion-label>

          <ion-badge
            [color]="
              d.estadoPago === 'Al d√≠a' ? 'success' :
              d.estadoPago === 'Pendiente' ? 'warning' : 
              d.estadoPago === 'Vac√≠o' ? 'medium' : 'danger'
            ">
            {{ d.estadoPago }}
          </ion-badge>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

</ion-content>
